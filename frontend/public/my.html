<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>BlackCat Security | Board</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="BlackCat Security ê²Œì‹œíŒ" />
  <link rel="stylesheet" href="/frontend/public/assets/css/style.css" />
  <link rel="stylesheet" href="/frontend/public/assets/css/board.css" />
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <a class="brand" href="/#top" aria-label="BlackCat Security">
        <img src="/frontend/public/assets/img/dark-logo.png" alt="" />
        <span class="brand-text">BlackCat Security</span>
      </a>

      <nav class="nav" aria-label="ì£¼ìš” ë©”ë‰´">
        <button class="nav-toggle" aria-expanded="false" aria-controls="navMenu">ë©”ë‰´</button>
        <ul id="navMenu" class="nav-menu">
          <!-- ë“œë¡­ë‹¤ìš´: HOME -->
          <li class="has-sub">
            <a class="toplink" href="/"> 
              HOME<span class="arrow"> </span></a>
          </li>

          <!-- ë“œë¡­ë‹¤ìš´: ABOUT -->
          <li class="has-sub">
            <a class="toplink" href="/#about">
              ABOUT <span class="arrow"> </span></a>
          </li>

          <!-- ë“œë¡­ë‹¤ìš´: ACTIVIty -->
          <li class="has-sub">
            <a class="toplink" href="/#activities">
              ACTIVITY <span class="arrow">â–¼</span></a>
            <ul class="submenu">
              <li><a href="/#activities">ìŠ¤í„°ë””</a></li>
              <li><a href="/#activities">ì»¨í¼ëŸ°ìŠ¤</a></li>
              <li><a href="/#activities">ctf</a></li>
              <li><a href="/#activities">í”„ë¡œì íŠ¸</a></li>
            </ul>
          </li>

          <!-- ë“œë¡­ë‹¤ìš´: BOARD -->
          <li class="has-sub">
            <a class="toplink" href="/#board">
              BOARD <span class="arrow">â–¼</span></a>
            <ul class="submenu">
              <li><a href="/#board">ì‚¬ì§„</a></li>
              <li><a href="#board-index containor">ê²Œì‹œíŒ</a></li>
            </ul>
          </li>

          <!-- ë“œë¡­ë‹¤ìš´: login -->
          <li class="has-sub">
            <a class="toplink" id="loginMenu" href="/login">
              LOGIN <span class="arrow">â–¼</span></a>
            <ul class="submenu">
              <li><a href="/login">ë¡œê·¸ì¸</a></li>
              <li><a href="#signup">íšŒì›ê°€ì…</a></li>
              <li><a href="/account/recover.html">ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a></li>
            </ul>
          </li>
        </ul>
      </nav>

      <!-- í—¤ë” ì•„ì´ì½˜ -->
      <div class="header-actions" role="group" aria-label="ì‚¬ìš©ì/ê²€ìƒ‰/ì–¸ì–´">
        <a class="icon-btn" id="personBtn" href="/login" aria-label="ë¡œê·¸ì¸">
          <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5Z"/></svg>
        </a>
        <span class="vdiv" aria-hidden="true"></span>
        <button class="icon-btn" type="button" aria-label="ê²€ìƒ‰">
          <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M21 20.29 16.65 16a8 8 0 1 0-1.41 1.41L20.29 21 21 20.29ZM4 10a6 6 0 1 1 6 6 6 6 0 0 1-6-6Z"/></svg>
        </button>
        <span class="vdiv" aria-hidden="true"></span>
        <a class="icon-btn" href="/en" aria-label="English">
          <svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true"><path fill="currentColor" d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm7.93 9h-3.11a15.5 15.5 0 0 0-1.05-5A8.01 8.01 0 0 1 19.93 11ZM12 4c.9 0 2.47 2.07 3.07 6H8.93C9.53 6.07 11.1 4 12 4ZM4.07 13h3.11a15.5 15.5 0 0 0 1.05 5 8.01 8.01 0 0 1-4.16-5Zm3.11-2H4.07A8.01 8.01 0 0 1 8.23 6a15.5 15.5 0 0 0-1.05 5Zm1.75 2h5.14c-.6 3.93-2.17 6-3.07 6s-2.47-2.07-3.07-6Zm7.84 0h3.11a8.01 8.01 0 0 1-4.16 5 15.5 15.5 0 0 0 1.05-5Z"/></svg>
        </a>
      </div>
    </div>
  </header>


  <section class="board-index container">
    <h1>ğŸ‘¤ ë§ˆì´í˜ì´ì§€</h1>
    <p><strong>ë‚´ ì•„ì´ë””:</strong> <span id="username">ë¡œë”© ì¤‘...</span></p>
    <p><strong>ê°€ì… ë‚ ì§œ:</strong> 2025.05.06.</p>
    <a href="">ì»¤ë®¤ë‹ˆí‹° ì´ìš© ê·œì¹™</a>


    <h2>ğŸ“ ë‚´ê°€ ì“´ ê¸€</h2>

      <!-- ëª©ë¡ í…Œì´ë¸” -->
      <div class="board-main">
        <div class="board-table-wrap" role="region" aria-label="ê²Œì‹œê¸€ ëª©ë¡" tabindex="0">
          <table class="board-list" id="table">
            <thead>
              <tr>
                <th scope="col">ê²Œì‹œíŒ</th>
                <th scope="col">ì œëª©</th>
                <th scope="col">ì´ë¦„</th>
                <th scope="col">ì¼ì‹œ</th>
              </tr>
            </thead>
            <tbody id="my-posts"><!-- JS ë Œë” --></tbody>
          </table>
        </div>
      </div>
    <p>ë²„ì „: 1.0.11.7</p>
  </section>

  <script>
    const token = localStorage.getItem('jwt_token');
    if (!token) {
      document.body.innerHTML = '<p>ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
      throw new Error('No token');
    }

    const payload = JSON.parse(atob(token.split('.')[1]));
    const username = payload.username;
    document.getElementById('username').textContent = username;

    const PAGES = {
      1: [
        {pageId:1, cat:'ê³µì§€ì‚¬í•­',   title:'[ê³µì§€] BlackCat ì •ê¸° ì„¸ë¯¸ë‚˜ ì§„í–‰',   author:'admin',   date:'2025-04-02'},
        {pageId:2, cat:'ììœ ê²Œì‹œíŒ', title:'ktì—ì„œ ë¬¸ìì™”ëŠ”ë° ì´ê±° ë§í•œê±°ëƒ?',    author:'bob',     date:'2025-04-02'},
        {pageId:3, cat:'ììœ ê²Œì‹œíŒ', title:'ì‚¬ì§„ ì˜¬ë¦¬ê³  ì‹¶ì€ë°',                 author:'bob',     date:'2025-04-02'},
        {pageId:4, cat:'í™ë³´ê²Œì‹œíŒ', title:'ë³´ì•ˆ ìŠ¤í„°ë””ì› ëª¨ì§‘ (ì˜¤í”„ë¼ì¸)',       author:'charlie', date:'2025-04-02'},
        {pageId:5, cat:'ììœ ê²Œì‹œíŒ', title:'ìš°ë¦¬ì§‘ ê³ ì–‘ì´ ì‚¬ì§„',                 author:'diana',   date:'2025-04-02'},
        {pageId:6, cat:'ê³µì§€ì‚¬í•­',   title:'[ê³µì§€] BlackCat ì¢…ê°•ì´íšŒ ì•Œë¦¼',      author:'admin',   date:'2025-04-01'},
        {pageId:7, cat:'ë¹„ë°€ê²Œì‹œíŒ', title:'ë¬¸ì˜ë“œë¦½ë‹ˆë‹¤',                       author:'ìµëª…',     date:'2025-04-01'},
      ],
      2: [
        {pageId:8,  cat:'ììœ ê²Œì‹œíŒ', title:'í•œë¡œë¡œ ë…¸ë˜ ì•ˆ ë“¤ì–´ë³¸ ì‚¬ëŒë„ ìˆë‚˜',  author:'alice',   date:'2025-04-01'},
        {pageId:9,  cat:'í™ë³´ê²Œì‹œíŒ', title:'í”„ë¡œì íŠ¸ í•  ì‚¬ëŒ ëª¨ì§‘',              author:'alice',   date:'2025-04-01'},
        {pageId:10, cat:'ë¹„ë°€ê²Œì‹œíŒ', title:'ê³ ì–‘ì´ ì‚¬ì§„ ì˜¬ë¦¬ëŠ” ë²•.txt',          author:'ìµëª…',     date:'2025-04-01'},
      ],
    };

    const CAT_CLASS = {
      'ê³µì§€ì‚¬í•­': 'cat-noti',
      'ììœ ê²Œì‹œíŒ': 'cat-free',
      'ë¹„ë°€ê²Œì‹œíŒ': 'cat-secret',
      'í™ë³´ê²Œì‹œíŒ': 'cat-promo',
    };

    const ul = document.getElementById('my-posts');
    ul.innerHTML = '';

    const allPosts = Object.values(PAGES).flat();
    const myPosts = allPosts.filter(post => post.author === username);

    if (myPosts.length === 0) {
      ul.innerHTML = '<tr><td colspan="4">ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
    } else {
      myPosts.forEach(post => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><span class="cat ${CAT_CLASS[post.cat] || ''}">${post.cat}</span></td>
          <td class="tt"><a href="/post?page=${post.pageId}">${post.title}</a></td>
          <td class="author">${post.author}</td>
          <td>${post.date.slice(5)}</td>
        `;
        ul.appendChild(tr);
      });
    }
  </script>

    <!-- ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ GNB ê°±ì‹  -->
  <script src="/frontend/public/assets/js/auth.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const loginMenu = document.getElementById('loginMenu');          // <a id="loginMenu">LOGIN â–¼</a>
    const personBtn = document.getElementById('personBtn');
    const loginLi   = loginMenu?.closest('li.has-sub');              // <li class="has-sub"> ... </li>
    const submenu   = loginLi?.querySelector('.submenu');            // ë“œë¡­ë‹¤ìš´ UL
    const arrow     = loginMenu?.querySelector('.arrow');            // â–¼ ì•„ì´ì½˜ span

    const hasToken = !!(window.getToken && window.getToken());

    if (hasToken) {
      // 1) ìƒë‹¨ í…ìŠ¤íŠ¸/ë™ì‘ì„ LOGOUTìœ¼ë¡œ ì „í™˜
      loginMenu.textContent = 'LOGOUT';
      loginMenu.href = '#';
      loginMenu.addEventListener('click', (e) => {
        e.preventDefault();
        clearToken();
        alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
        location.href = '/';
      }, { once: true });

      // 2) ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ì œê±° (ë¡œê·¸ì¸/íšŒì›ê°€ì…/ì•„ì´ë””ì°¾ê¸° ìˆ¨ê¹€)
      if (submenu) submenu.remove();
      // ë“œë¡­ë‹¤ìš´ ì¼€ëŸ¿/ìŠ¤íƒ€ì¼ ì œê±°
      arrow?.remove();
      loginLi?.classList.remove('has-sub');

      // 3) ì‚¬ëŒ ì•„ì´ì½˜ì€ ë§ˆì´í˜ì´ì§€ë¡œ
      personBtn?.setAttribute('href','/my');
    } else {
      // ë¹„ë¡œê·¸ì¸: ê¸°ë³¸ ë§í¬ ìœ ì§€
      loginMenu?.setAttribute('href','/login');
      personBtn?.setAttribute('href','/login');
    }
  });
  </script>

     <!-- í‘¸í„° -->
  <footer class="site-footer">
    <div class="container footer-inner">
      <div><strong>BlackCat Security</strong><br/>security@blackcat.security</div>
    </div>
    <p class="copy">Â© 2025 BlackCat Security. All rights reserved.</p>
  </footer>
</body>
</html>
